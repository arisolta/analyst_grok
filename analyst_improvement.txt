# Brainstorming: Enhancing the AI Analyst's Capabilities

This document outlines potential improvements to the "brain" and analytical depth of the tool, moving beyond technical robustness into financial sophistication.

## 1. Advanced Data Acquisition (The "Senses")
*   **Competitor Benchmarking:** Instead of analyzing a single ticker in isolation, automatically identify top 3-5 peers (using `yfinance` or sector classification), fetch their key metrics (P/E, EV/EBITDA, Margins), and generate a comparative valuation table.
*   **Earnings Call Analysis (RAG):** Fetch recent earnings call transcripts (e.g., via specialized APIs or scraping). Use the LLM to extract management tone, guidance changes, and specific analyst Q&A concerns.
*   **Alternative Data/Sentiment:** Integrate a news sentiment analysis module. Fetch headlines from the last 30 days and calculate a "bullish/bearish" sentiment score to overlay on price action.
*   **Macro/Sector Feed:** Before analyzing the specific stock, fetch data on the relevant sector ETF (e.g., XLK for Tech, XLE for Energy) and major indices (SPY) to contextualize performance (Beta, Relative Strength).

## 2. Hard Skills & Quant Rigor (The "Math")
*   **Python-Native Calculations:** Stop asking the LLM to "calculate" valuation ratios, as it often hallucinates arithmetic.
    *   *Implementation:* Use Python to calculate CAGR, Margins, and Ratios from the raw `yfinance` dataframes, then pass these pre-calculated, hard numbers to the prompt.
*   **Technical Analysis Module:** Use libraries like `ta` or `pandas-ta` to calculate RSI, MACD, and Moving Averages (50D, 200D). Pass these signals to the LLM to inform the "Timing" or "Technical View" section.
*   **DCF scaffolding:** Have Python project a simple 5-year cash flow based on historical growth rates and WACC assumptions, then ask the LLM to critique and refine the assumptions rather than inventing the whole model.

## 3. Visuals & Presentation (The "Deliverable")
*   **Chart Generation:** Use `matplotlib` or `plotly` to generate actual PNG charts (Price vs. MA, Revenue Growth bars) and save them alongside the text report.
*   **PDF Reports:** Move beyond Markdown/Text files. Use a library like `fpdf` or `reportlab` to compile the text and generated charts into a professional-looking PDF equity research report.

## 4. Analytical "Modes" (The "Persona")
*   **Bear/Bull Case Switch:** Allow the user to request a specific bias (e.g., "Give me the Short Seller report" vs. "Give me the Growth Investor pitch") to stress-test the thesis.
*   **Investment Horizon:** "Day Trader" mode (Technicals, Momentum, News) vs. "Long-Term Compounder" mode (Moat, Management, ROIC).

## 5. Multi-Agent Architecture (The "Team")
*   **Concept:** Decompose the single "Analyst" into a sequential pipeline of specialized agents. This reduces hallucination (by separating data fetching from reasoning) and improves depth (by allowing focused analysis).

*   **Proposed Workflow:**
    1.  **Orchestrator:** The main Python script that manages the state (JSON object) and passes it between agents.
    2.  **Agent 1: The Data Scout (Python-heavy, Low LLM)**
        *   *Role:* "Get me the facts."
        *   *Task:* Fetches `yfinance` data, scrapes news headlines, gets peer data.
        *   *Output:* A structured dictionary `raw_data = { "price": ..., "financials": ..., "news": ... }`.
    3.  **Agent 2: The Fundamental Analyst (LLM - Reasoning Model)**
        *   *Role:* "Crunch the numbers."
        *   *Input:* `raw_data['financials']`
        *   *Task:* Calculates growth rates, margins, and valuation multiples. Identifies red flags in the balance sheet.
        *   *Output:* A Markdown section "Financial Deep Dive".
    4.  **Agent 3: The Sentiment Analyst (LLM - Fast Model)**
        *   *Role:* "Read the room."
        *   *Input:* `raw_data['news']` + `web_search` results.
        *   *Task:* Summarizes recent narratives, management tone, and market sentiment.
        *   *Output:* A Markdown section "Qualitative & Catalyst Analysis".
    5.  **Agent 4: The Portfolio Manager (LLM - Reasoning Model)**
        *   *Role:* "Make the call."
        *   *Input:* Output from Agent 2 (Numbers) + Agent 3 (Narrative).
        *   *Task:* Weighs value vs. sentiment. Decides the Rating (Strong Buy / Buy / Hold / Sell). Writes the "Executive Summary" and "Investment Thesis".
    6.  **Agent 5: The Editor (LLM - Fast Model)**
        *   *Role:* "Polish the product."
        *   *Task:* Assembles all sections, standardizes the tone, checks for formatting consistency, and produces the final report.

*   **Implementation Steps:**
    *   Create a `agents/` directory.
    *   Define a standard `Agent` class or interface.
    *   Create separate prompt templates for each role in `prompts.py`.
